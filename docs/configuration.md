# Configuration

Copy `.env.template` to `.env` and set:

## Required

| Variable | Description |
|----------|-------------|
| `TELEGRAM_BOT_TOKEN` | Telegram bot token |
| `ALLOWED_CHATS` | Comma-separated Telegram chat IDs |
| `REDIS_PASSWORD` | Redis authentication password |

## Optional

| Variable | Default | Description |
|----------|---------|-------------|
| `SSH_KEYS_DIR` | `./ssh-keys` | Path to SSH keys |
| `LOG_LEVEL` | `INFO` | Logging level (DEBUG/INFO/WARNING/ERROR) |
| `MAX_CONCURRENT_TASKS` | `3` | Max parallel task executions |
| `TASK_TIMEOUT` | `300` | Task timeout in seconds |
| `SESSION_TTL` | `14400` | Session context window in seconds (4h) |
| `HISTORY_TTL` | `86400` | History retention in Redis (24h) |
| `SUDO_COMMANDS` | `nmap,tcpdump,...` | Comma-separated commands hcli can sudo (full paths resolved at startup) |
| `GATE_CHECK` | `true` | Asimov firewall Haiku gate check — independent model evaluates each command (adds ~2-3s per command). Set to false to disable. |
| `BLOCKED_PATTERNS` | — | Pipe-separated denylist patterns (e.g. `\| bash\|base64 -d`) |
| `BLOCKED_PATTERNS_FILE` | `/app/blocked-patterns.txt` | Pattern file (~80 patterns, 12 categories). Override with your own for external CVE/signature feeds |
| `RESULT_HMAC_KEY` | — | HMAC-SHA256 key for result signing (auto-generated by install.sh) |
| `CORE_BASE_IMAGE` | `debian:12-slim` | Base image for the core container |

## Integrations

| Variable | Description |
|----------|-------------|
| `NETBOX_URL` | NetBox instance URL |
| `NETBOX_API_TOKEN` | NetBox API token |
| `GRAFANA_URL` | Grafana instance URL |
| `GRAFANA_API_TOKEN` | Grafana API token |
| `EVE_NG_URL` | EVE-NG REST API URL |
| `EVE_NG_USERNAME` | EVE-NG username |
| `EVE_NG_PASSWORD` | EVE-NG password |

## Claude Code Authentication

Uses Claude Max/Pro subscription — no API costs. One-time setup:

```bash
docker compose run -it claude-code setup-token
# opens a URL — authenticate in browser, paste the key back
# token prints to screen, copy into CLAUDE_CODE_OAUTH_TOKEN in .env
```
